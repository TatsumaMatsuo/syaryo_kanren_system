---
name: 個別承認・却下機能
about: 書類ごとに個別に承認・却下できる機能
title: '✅ 個別承認・却下機能の実装'
labels: 'enhancement, priority-medium'
assignees: ''
---

## 📋 要件

- [ ] 個別承認ボタンの実装
- [ ] 個別却下ボタンの実装
- [ ] 部分的に承認された状態の管理
- [ ] UI/UXの改善（どの書類が承認済みか明確に表示）
- [ ] 全承認チェック機能

## 🛠️ 技術スタック

- TypeScript
- React
- Next.js
- Tailwind CSS

## 📝 説明

現在は免許証・車検証・任意保険証を一括でしか承認・却下できません。書類ごとに個別に承認・却下できるようにして、柔軟な運用を可能にします。

### 現在の動作

```
[承認] ボタン → 3つすべてを承認
[却下] ボタン → 3つすべてを却下
```

### 改善後の動作

```
免許証:
  [承認] [却下] ← 個別ボタン

車検証:
  [承認] [却下] ← 個別ボタン

任意保険証:
  [承認] [却下] ← 個別ボタン

[すべて承認] [すべて却下] ← 一括ボタン
```

## 📊 UI/UX設計

### 承認状態の表示

- **未承認**: 黄色バッジ + 承認/却下ボタン表示
- **承認済み**: 緑色バッジ + ボタン非表示
- **却下**: 赤色バッジ + 再申請を促すメッセージ

### 部分承認の表示

```
✅ 免許証: 承認済み
✅ 車検証: 承認済み
⏳ 任意保険証: 審査中

状態: 部分承認（2/3件）
```

## 📊 成功条件

- [ ] 個別承認・却下が正常に動作
- [ ] 承認状態がリアルタイムに反映
- [ ] UI/UXが直感的でわかりやすい
- [ ] レスポンシブデザイン対応

## 🔗 関連ファイル

- `app/(admin)/admin/applications/page.tsx` - 一覧画面
- `app/(admin)/admin/applications/[employeeId]/page.tsx` - 詳細画面（2分割ビュー）
- `app/api/approvals/[id]/route.ts` - 承認API
- `app/api/approvals/[id]/reject/route.ts` - 却下API

## 🎯 実装方針

1. 詳細画面（2分割ビュー）に個別承認・却下ボタンを追加
2. 承認状態に応じてボタンの表示/非表示を切り替え
3. 部分承認時の状態表示を改善
4. 一括承認・却下ボタンも維持（既存機能）

## 🔄 ワークフロー例

### ケース1: 免許証のみ期限切れ

1. 管理者が詳細画面で確認
2. 車検証と任意保険証を個別に承認
3. 免許証を却下（理由: 有効期限切れ）
4. 申請者に通知が送信される

### ケース2: すべて問題なし

1. 管理者が詳細画面で確認
2. 「すべて承認」ボタンをクリック（従来通り）
3. 3つすべてが承認される

---

🤖 Generated with [Claude Code](https://claude.com/claude-code)
